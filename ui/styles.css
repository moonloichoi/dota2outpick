:root{
  /* palette */
  --bg:#0b0f14; --card:#111722; --soft:#151f2b; --text:#e6edf3; --muted:#9fb0c3; --line:#1d2a3a; --brand:#3b82f6;

  /* layout */
  --hdr:56px; --gap:12px; --wmh:22px;

  /* size dials (can be tuned without changing layout structure) */
  --queueBand:120px;       /* Enemy queue band height */
  --poolRow:72px;          /* tile height in pool (16:9) */
  --poolVisible:4;         /* exactly 4 rows visible in pool (internal scroll) */
  --sugRow:96px;           /* card height for pick list (16:9) */
  --sugRowItem:88px;       /* slightly smaller card for buy list (11:8) */
}

/* ===================== Base ===================== */
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family:system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
  background:var(--bg); color:var(--text);
  overflow:hidden; /* no page scroll */
}

/* Containers */
header{
  position:sticky; top:0; z-index:5;
  background:rgba(11,15,20,.65); backdrop-filter:blur(8px);
  border-bottom:1px solid var(--line);
}
.bar{max-width:1200px;margin:0 auto;padding:.75rem 1rem;display:flex;gap:12px;align-items:center}
.brand{font-weight:800}
.tag{flex:1;text-align:center;color:var(--muted)}

main{
  max-width:1200px;margin:0 auto;padding:14px;
  display:grid; gap:20px; grid-template-columns:1fr 1fr;
}

/* Panels */
.card{background:var(--card);border:1px solid var(--line);border-radius:14px;padding:12px}
.splitL{box-shadow:inset -1px 0 0 var(--line)}
.splitR{box-shadow:inset 1px 0 0 var(--line)}
.sectionTitle{display:flex;align-items:center;gap:8px;margin:2px 0 10px;font-size:1rem;color:#cfe1ff}
.sectionTitle svg{width:18px;height:18px;opacity:.9}

/* ===================== Enemy Queue ===================== */
.queue{grid-column:1 / -1}
.qbody{display:flex;flex-direction:column;gap:10px}
.slots{display:flex;gap:8px;justify-content:center}
.slot{
  width:104px; aspect-ratio:16/9; /* strict 16:9 */
  display:grid; place-items:center;
  border-radius:10px; border:1px dashed #2a3a52; color:#7f92a7;
  background:#0e141b; overflow:hidden;
}
.slot.filled{border-style:solid;border-color:#2d466a}
.slot img{width:100%;height:100%;object-fit:cover}
.qactions{display:flex;justify-content:center;margin-top:6px}
.btn{
  background:#182330;border:1px solid #23334a;color:#cfe1ff;
  border-radius:10px;padding:.45rem .9rem;font-weight:800;cursor:pointer;
}
.btn:active{transform:translateY(1px)}

/* ===================== Pool: Choose your enemies ===================== */
.pool{grid-column:1 / 2}
.searchbar{position:relative;margin-bottom:8px}
.searchbar input{
  width:100%;background:#0e141b;border:1px solid #2b3a52;color:var(--text);
  border-radius:10px;padding:.55rem .7rem;
}
.searchbar button.clearX{
  position:absolute;right:8px;top:50%;transform:translateY(-50%);
  background:#152131;border:1px solid #2b3a52;color:#9fb0c3;border-radius:8px;
  padding:.2rem .45rem;cursor:pointer;
}

/* Grid shows EXACTLY 4 rows (internal scroll) */
.grid{
  display:grid; grid-template-columns:repeat(4,1fr); gap:8px;
  max-height: calc(var(--poolRow) * var(--poolVisible) + 8px * (var(--poolVisible) - 1));
  overflow:auto; padding-right:4px;
}
.tile{
  position:relative; border:1px solid #213247; border-radius:12px; overflow:hidden;
  cursor:pointer; background:#1a2432; aspect-ratio:16/9;
  transition:transform .08s ease, box-shadow .12s ease;
}
.tile img{
  position:absolute; inset:0; width:100%; height:100%; object-fit:cover;
  filter:saturate(92%) contrast(1.02);
}
.tile::after{content:"";position:absolute;inset:0;background:linear-gradient(180deg,rgba(0,0,0,0) 45%, rgba(0,0,0,.55))}
.tile:hover{transform:scale(1.02); will-change:transform} /* subtle hover zoom (spec) */

.tname{
  position:absolute; left:8px; bottom:6px; right:8px;
  font-weight:800; text-shadow:0 2px 8px rgba(0,0,0,.6);
  /* Left-aligned, up to 2 lines, NO ellipsis */
  display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical;
  overflow:hidden; white-space:normal; text-overflow:clip;
  text-align:left; line-height:1.05;
}
.tile.picked{
  outline:3px solid var(--brand);
  box-shadow:0 0 0 4px rgba(59,130,246,.25) inset;
  filter:saturate(1.05) brightness(1.05);
}
.pickedBadge{
  position:absolute; top:6px; left:6px;
  background:var(--brand); color:#021528; padding:.12rem .38rem;
  border-radius:6px; font-size:.75rem; font-weight:800;
  box-shadow:0 2px 8px rgba(0,0,0,.35);
}

/* ===================== Suggestions: You should pick / buy ===================== */
.suggest{
  grid-column:2 / 3;
  display:grid; grid-template-rows:1fr 1fr; gap:20px;
}

/* One-row-of-5 layout, fixed height, internal scroll disabled by default */
.list{
  display:grid; grid-template-columns:repeat(5, 1fr); gap:8px;
  max-height: var(--sugRow); min-height: var(--sugRow);
  overflow:hidden; padding-right:4px;
}
.list .sug:nth-child(n+6){ display:none } /* enforce exactly 1 row of 5 cards */

/* Card (pick) */
.sug{
  position:relative; border:1px solid #213247; border-radius:12px; overflow:hidden;
  background:#1a2432;
  height:var(--sugRow); min-height:var(--sugRow); /* fixed height (no jumping) */
  display:block; /* keep flow stable */
  aspect-ratio:16/9;               /* hero image ratio (pick) */
}
.sug img{position:absolute;inset:0;width:100%;height:100%;object-fit:cover}
.sug::after{content:"";position:absolute;inset:0;background:linear-gradient(180deg,rgba(0,0,0,0) 45%, rgba(0,0,0,.6))}

/* Name: left-aligned, up to 2 lines, no ellipsis */
.sname{
  position:absolute; left:8px; right:8px; bottom:6px;
  font-weight:800; text-shadow:0 2px 8px rgba(0,0,0,.6);
  display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical;
  overflow:hidden; white-space:normal; text-overflow:clip; text-align:left; line-height:1.05;
}

/* Source icons overlay (does not affect layout) */
.sources{
  position:absolute; right:6px; top:6px; display:flex; gap:4px; pointer-events:none;
}
.src{
  flex:0 0 18px; width:18px; height:18px; border-radius:4px; overflow:hidden;
  border:1px solid rgba(255,255,255,.4); /* 1px, white @40% (spec) */
  background:#0e141b;
}
.src img{display:block;width:100%;height:100%;object-fit:cover}
.src.more{
  display:grid; place-items:center;
  color:#cfe1ff; font-size:.7rem; font-weight:800;
  border:1px solid #2a3a52; border-radius:4px; background:#0e141b;
}

/* Buy list: 1 row of 5, slightly smaller, 11:8 ratio */
#itemList{
  max-height: var(--sugRowItem); min-height: var(--sugRowItem);
}
#itemList .sug{
  height:var(--sugRowItem); min-height:var(--sugRowItem);
  aspect-ratio:11/8; /* item images 11:8 (spec) */
}

/* ===================== Watermark & Toast ===================== */
.watermark{
  max-width:1200px;margin:4px auto 14px;text-align:center;
  color:var(--muted);opacity:.45;font-size:12px;pointer-events:none;
}
.toast{
  position:fixed; left:50%; bottom:calc(var(--wmh) + 14px);
  transform:translate(-50%,0);
  background:#1f2d3a;color:#d9edff;border:1px solid #2a3a52;border-radius:10px;
  padding:.45rem .7rem;font-weight:700;opacity:.95; z-index:50;
}

/* ===================== Responsive (Portrait) ===================== */
@media (max-width:428px){
  :root{ --poolRow:70px; --sugRow:90px; --sugRowItem:82px; --queueBand:110px; }
  main{grid-template-columns:1fr}
  .grid{grid-template-columns:repeat(3,1fr)}
  .list{grid-template-columns:repeat(5,1fr)} /* still 1 row of 5; cards narrower */
  .slot{width:88px}
}
